<Page
    x:Class="Calculator.page.NewtonMethodWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:oxy="http://oxyplot.org/wpf"
    Title="Метод Ньютона"
    d:DesignHeight="700"
    d:DesignWidth="1100"
    mc:Ignorable="d"
    Background="#F5F7FA">

	<Grid Margin="20">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<!-- Заголовок -->
		<StackPanel Grid.Row="0" Margin="0,0,0,20">
			<TextBlock Text="Метод Ньютона"
                       FontSize="28"
                       FontWeight="Bold"
                       Foreground="#2C3E50"/>
			<TextBlock Text=""
                       FontSize="16"
                       Foreground="#7F8C8D"/>
		</StackPanel>

		<!-- Основной контент -->
		<Grid Grid.Row="1">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="350"/>
				<ColumnDefinition Width="20"/>
				<ColumnDefinition Width="*"/>
			</Grid.ColumnDefinitions>

			<!-- Левая панель - параметры -->
			<Border Grid.Column="0"
                    Background="White"
                    CornerRadius="8"
                    BorderBrush="#E0E0E0"
                    BorderThickness="1"
                    Padding="20">
				<StackPanel>
					<!-- Кнопка назад -->
					<Button x:Name="BackButton"
                            Content="Назад"
                            Click="BackButton_Click"
                            Background="#95A5A6"
                            Foreground="White"
                            BorderThickness="0"
                            Padding="10,8"
                            FontSize="14"
                            FontWeight="SemiBold"
                            Margin="0,0,0,20"
                            HorizontalAlignment="Left"
                            Cursor="Hand" Width="69" Height="30">
						<Button.Style>
							<Style TargetType="Button">
								<Setter Property="Template">
									<Setter.Value>
										<ControlTemplate TargetType="Button">
											<Border Background="{TemplateBinding Background}"
                                                    CornerRadius="4">
												<ContentPresenter HorizontalAlignment="Center"
                                                                  VerticalAlignment="Center"/>
											</Border>
										</ControlTemplate>
									</Setter.Value>
								</Setter>
								<Style.Triggers>
									<Trigger Property="IsMouseOver" Value="True">
										<Setter Property="Background" Value="#7F8C8D"/>
									</Trigger>
								</Style.Triggers>
							</Style>
						</Button.Style>
					</Button>

					<!-- Поля ввода -->
					<TextBlock Text="Функция f(x):"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Margin="0,0,0,5"/>
					<TextBox x:Name="FunctionTextBox"
                             Text="x^2"
                             TextChanged="TextBox_TextChanged"
                             Padding="8"
                             FontSize="14"
                             Margin="0,0,0,15"
                             ToolTip="Примеры: x^2, sin(x), cos(x), exp(x), log(x), sqrt(x), abs(x)"/>

					<TextBlock Text="Начальная точка (x0):"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Margin="0,0,0,5"/>
					<TextBox x:Name="InitialPointTextBox"
                             Text="1"
                             TextChanged="TextBox_TextChanged"
                             Padding="8"
                             FontSize="14"
                             Margin="0,0,0,15"/>

					<TextBlock Text="Точность (ε):"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Margin="0,0,0,5"/>
					<TextBox x:Name="PrecisionTextBox"
                             Text="0.001"
                             TextChanged="TextBox_TextChanged"
                             Padding="8"
                             FontSize="14"
                             Margin="0,0,0,15"/>

					<TextBlock Text="Макс. итераций:"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Margin="0,0,0,5"/>
					<TextBox x:Name="MaxIterationsTextBox"
                             Text="100"
                             TextChanged="TextBox_TextChanged"
                             Padding="8"
                             FontSize="14"
                             Margin="0,0,0,15"/>

					<TextBlock Text="Интервал графика [a,b]:"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Margin="0,0,0,5"/>
					<Grid Margin="0,0,0,15">
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="*"/>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition Width="*"/>
						</Grid.ColumnDefinitions>
						<TextBox x:Name="StartIntervalTextBox"
                                 Grid.Column="0"
                                 Text="-2"
                                 TextChanged="TextBox_TextChanged"
                                 Padding="8"
                                 FontSize="14"/>
						<TextBlock Grid.Column="1"
                                   Text=""
                                   VerticalAlignment="Center"
                                   Margin="10,0"/>
						<TextBox x:Name="EndIntervalTextBox"
                                 Grid.Column="2"
                                 Text="2"
                                 TextChanged="TextBox_TextChanged"
                                 Padding="8"
                                 FontSize="14"/>
					</Grid>

					<!-- Кнопки -->
					<Button x:Name="AutoStartButton"
                            Content="Автоподбор начальной точки"
                            Click="AutoStartButton_Click"
                            Background="#95A5A6"
                            Foreground="White"
                            BorderThickness="0"
                            Padding="12,8"
                            FontSize="14"
                            FontWeight="SemiBold"
                            Margin="0,0,0,10"
                            Cursor="Hand" Height="40">
						<Button.Style>
							<Style TargetType="Button">
								<Setter Property="Template">
									<Setter.Value>
										<ControlTemplate TargetType="Button">
											<Border Background="{TemplateBinding Background}"
                                                    CornerRadius="4">
												<ContentPresenter HorizontalAlignment="Center"
                                                                  VerticalAlignment="Center"/>
											</Border>
										</ControlTemplate>
									</Setter.Value>
								</Setter>
								<Style.Triggers>
									<Trigger Property="IsMouseOver" Value="True">
										<Setter Property="Background" Value="#7F8C8D"/>
									</Trigger>
								</Style.Triggers>
							</Style>
						</Button.Style>
					</Button>

					<Button x:Name="CalculateButton"
                            Content="Найти минимум"
                            Click="CalculateButton_Click"
                            Background="#3498DB"
                            Foreground="White"
                            BorderThickness="0"
                            Padding="12,10"
                            FontSize="14"
                            FontWeight="SemiBold"
                            Margin="0,0,0,10"
                            Cursor="Hand" Height="40">
						<Button.Style>
							<Style TargetType="Button">
								<Setter Property="Template">
									<Setter.Value>
										<ControlTemplate TargetType="Button">
											<Border Background="{TemplateBinding Background}"
                                                    CornerRadius="4">
												<ContentPresenter HorizontalAlignment="Center"
                                                                  VerticalAlignment="Center"/>
											</Border>
										</ControlTemplate>
									</Setter.Value>
								</Setter>
								<Style.Triggers>
									<Trigger Property="IsMouseOver" Value="True">
										<Setter Property="Background" Value="#2980B9"/>
									</Trigger>
								</Style.Triggers>
							</Style>
						</Button.Style>
					</Button>

					<Button x:Name="ClearButton"
                            Content="Очистить"
                            Click="ClearButton_Click"
                            Background="#95A5A6"
                            Foreground="White"
                            BorderThickness="0"
                            Padding="12,8"
                            FontSize="14"
                            FontWeight="SemiBold"
                            Cursor="Hand" Height="40">
						<Button.Style>
							<Style TargetType="Button">
								<Setter Property="Template">
									<Setter.Value>
										<ControlTemplate TargetType="Button">
											<Border Background="{TemplateBinding Background}"
                                                    CornerRadius="4">
												<ContentPresenter HorizontalAlignment="Center"
                                                                  VerticalAlignment="Center"/>
											</Border>
										</ControlTemplate>
									</Setter.Value>
								</Setter>
								<Style.Triggers>
									<Trigger Property="IsMouseOver" Value="True">
										<Setter Property="Background" Value="#7F8C8D"/>
									</Trigger>
								</Style.Triggers>
							</Style>
						</Button.Style>
					</Button>
				</StackPanel>
			</Border>

			<!-- Правая панель -->
			<Grid Grid.Column="2">
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="20"/>
					<RowDefinition Height="*"/>
				</Grid.RowDefinitions>

				<!-- Результаты -->
				<Border Grid.Row="0"
                        Background="White"
                        CornerRadius="8"
                        BorderBrush="#E0E0E0"
                        BorderThickness="1"
                        Padding="20">
					<StackPanel>
						<TextBlock Text="Результаты поиска минимума:"
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,10"/>
						<TextBox x:Name="ResultTextBox"
                                 IsReadOnly="True"
                                 FontFamily="Consolas"
                                 FontSize="12"
                                 Background="#F8F9FA"
                                 BorderBrush="#E0E0E0"
                                 BorderThickness="1"
                                 Padding="10"
                                 TextWrapping="Wrap"
                                 VerticalScrollBarVisibility="Auto"
                                 Height="120"/>
					</StackPanel>
				</Border>

				<!-- График -->
				<Border Grid.Row="2"
                        Background="White"
                        CornerRadius="8"
                        BorderBrush="#E0E0E0"
                        BorderThickness="1"
                        Padding="20"
                        Margin="0,20,0,0">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="*"/>
						</Grid.RowDefinitions>
						<TextBlock Text="График функции"
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,10"/>
						<Border Grid.Row="1"
                                Background="White"
                                BorderBrush="#E0E0E0"
                                BorderThickness="1">
							<!-- Используем WindowsFormsHost для совместимости -->
							<WindowsFormsHost x:Name="ChartHost" Background="White"/>
						</Border>
					</Grid>
				</Border>
			</Grid>
		</Grid>
	</Grid>
</Page>