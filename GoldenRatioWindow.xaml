<Page
    x:Class="Calculator.page.GoldenRatioWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:wf="clr-namespace:System.Windows.Forms.DataVisualization.Charting;assembly=System.Windows.Forms.DataVisualization"
    Title="Метод золотого сечения"
    d:DesignHeight="700"
    d:DesignWidth="1100"
    mc:Ignorable="d"
    Background="#F5F7FA">

	<Page.Resources>
		<Style x:Key="TitleStyle" TargetType="TextBlock">
			<Setter Property="FontFamily" Value="Segoe UI" />
			<Setter Property="FontSize" Value="28" />
			<Setter Property="FontWeight" Value="Bold" />
			<Setter Property="Foreground" Value="#2C3E50" />
		</Style>

		<Style x:Key="SubtitleStyle" TargetType="TextBlock">
			<Setter Property="FontFamily" Value="Segoe UI" />
			<Setter Property="FontSize" Value="18" />
			<Setter Property="Foreground" Value="#5D6D7E" />
			<Setter Property="Margin" Value="0,0,0,10" />
		</Style>

		<Style x:Key="LabelStyle" TargetType="TextBlock">
			<Setter Property="FontFamily" Value="Segoe UI" />
			<Setter Property="FontSize" Value="16" />
			<Setter Property="FontWeight" Value="SemiBold" />
			<Setter Property="Foreground" Value="#2C3E50" />
			<Setter Property="Margin" Value="0,15,0,5" />
		</Style>

		<Style x:Key="TextBoxStyle" TargetType="TextBox">
			<Setter Property="FontFamily" Value="Segoe UI" />
			<Setter Property="FontSize" Value="16" />
			<Setter Property="Padding" Value="10" />
			<Setter Property="Background" Value="White" />
			<Setter Property="BorderBrush" Value="#E0E0E0" />
			<Setter Property="BorderThickness" Value="1" />
			<Setter Property="VerticalContentAlignment" Value="Center" />
			<Setter Property="Height" Value="40" />
		</Style>

		<Style x:Key="ComboBoxStyle" TargetType="ComboBox">
			<Setter Property="FontFamily" Value="Segoe UI" />
			<Setter Property="FontSize" Value="16" />
			<Setter Property="Padding" Value="10" />
			<Setter Property="Background" Value="White" />
			<Setter Property="BorderBrush" Value="#E0E0E0" />
			<Setter Property="BorderThickness" Value="1" />
			<Setter Property="VerticalContentAlignment" Value="Center" />
			<Setter Property="Height" Value="40" />
		</Style>

		<Style x:Key="ButtonStyle" TargetType="Button">
			<Setter Property="FontFamily" Value="Segoe UI" />
			<Setter Property="FontSize" Value="16" />
			<Setter Property="FontWeight" Value="SemiBold" />
			<Setter Property="Padding" Value="15,10" />
			<Setter Property="Background" Value="#3498DB" />
			<Setter Property="Foreground" Value="White" />
			<Setter Property="BorderThickness" Value="0" />
			<Setter Property="Cursor" Value="Hand" />
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Button">
						<Border
                            x:Name="border"
                            Background="{TemplateBinding Background}"
                            CornerRadius="6">
							<ContentPresenter
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"/>
						</Border>
						<ControlTemplate.Triggers>
							<Trigger Property="IsMouseOver" Value="True">
								<Setter TargetName="border" Property="Background" Value="#2980B9" />
							</Trigger>
							<Trigger Property="IsEnabled" Value="False">
								<Setter TargetName="border" Property="Background" Value="#BDC3C7" />
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>

		<Style x:Key="SecondaryButtonStyle" TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
			<Setter Property="Background" Value="#95A5A6" />
			<Style.Triggers>
				<Trigger Property="IsMouseOver" Value="True">
					<Setter Property="Background" Value="#7F8C8D" />
				</Trigger>
			</Style.Triggers>
		</Style>

		<Style x:Key="ResultsTextBoxStyle" TargetType="TextBox">
			<Setter Property="FontFamily" Value="Consolas" />
			<Setter Property="FontSize" Value="14" />
			<Setter Property="Padding" Value="10" />
			<Setter Property="Background" Value="#F8F9FA" />
			<Setter Property="BorderBrush" Value="#E0E0E0" />
			<Setter Property="BorderThickness" Value="1" />
			<Setter Property="IsReadOnly" Value="True" />
			<Setter Property="TextWrapping" Value="Wrap" />
			<Setter Property="VerticalScrollBarVisibility" Value="Auto" />
			<Setter Property="HorizontalScrollBarVisibility" Value="Disabled" />
		</Style>
	</Page.Resources>

	<Grid Margin="20">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition />
			<RowDefinition Height="Auto" MinHeight="39.817" />
		</Grid.RowDefinitions>

		<!-- Заголовок -->
		<StackPanel Grid.Row="0" Margin="0,0,0,20">
			<TextBlock Style="{StaticResource TitleStyle}" Text="Метод дихотомии" />
			<TextBlock Style="{StaticResource SubtitleStyle}" Text="Поиск корней уравнений и экстремумов функций" />
		</StackPanel>

		<!-- Основной контент -->
		<Grid Margin="0,91,0,20" Grid.RowSpan="2">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="350" />
				<ColumnDefinition Width="20" />
				<ColumnDefinition Width="*" />
			</Grid.ColumnDefinitions>

			<!-- Левая панель - Параметры -->
			<Border
                Grid.Column="0"
                Background="White"
                CornerRadius="8"
                BorderBrush="#E0E0E0"
                BorderThickness="1"
                Padding="20" Margin="0,0,0,-40">

				<Border.Effect>
					<DropShadowEffect BlurRadius="10" Opacity="0.1" ShadowDepth="2" />
				</Border.Effect>

				<StackPanel Margin="0,0,0,-11">
					<Button
                        x:Name="BackButton"
                        Style="{StaticResource SecondaryButtonStyle}"
                        Content="← Назад"
                        Click="BackButton_Click"
                        HorizontalAlignment="Left"
                        Margin="0,0,0,1"
                        Padding="20,10" />

					<TextBlock Style="{StaticResource LabelStyle}" Text="Функция f(x):" />
					<TextBox
                        x:Name="FunctionTextBox"
                        Style="{StaticResource TextBoxStyle}"
                        TextChanged="TextBox_TextChanged"
                        Margin="0,0,0,1" />

					<TextBlock Style="{StaticResource LabelStyle}" Text="Тип задачи:" />
					<ComboBox
                        x:Name="TaskTypeComboBox"
                        Style="{StaticResource ComboBoxStyle}"
                        SelectionChanged="TaskTypeComboBox_SelectionChanged"
                        Margin="0,0,0,1">
						<ComboBoxItem Content="Поиск корня" />
						<ComboBoxItem Content="Поиск экстремума" />
					</ComboBox>

					<StackPanel x:Name="ExtremumTypePanel" Visibility="Collapsed" Margin="0,0,0,10">
						<TextBlock Style="{StaticResource LabelStyle}" Text="Тип экстремума:" />
						<ComboBox
                            x:Name="ExtremumTypeComboBox"
                            Style="{StaticResource ComboBoxStyle}">
							<ComboBoxItem Content="Минимум" />
							<ComboBoxItem Content="Максимум" />
						</ComboBox>
					</StackPanel>

					<TextBlock Style="{StaticResource LabelStyle}" Text="Начало интервала (a):" />
					<TextBox
                        x:Name="StartTextBox"
                        Style="{StaticResource TextBoxStyle}"
                        Text="0"
                        TextChanged="TextBox_TextChanged"
                        Margin="0,0,0,1" />

					<TextBlock Style="{StaticResource LabelStyle}" Text="Конец интервала (b):" />
					<TextBox
                        x:Name="EndTextBox"
                        Style="{StaticResource TextBoxStyle}"
                        Text="10"
                        TextChanged="TextBox_TextChanged"
                        Margin="0,0,0,1" />

					<TextBlock Style="{StaticResource LabelStyle}" Text="Точность (ε):" />
					<TextBox
                        x:Name="PrecisionTextBox"
                        Style="{StaticResource TextBoxStyle}"
                        Text="0.001"
                        TextChanged="TextBox_TextChanged"
                        Margin="0,0,0,10" />

					<StackPanel Orientation="Horizontal">
						<Button
                            x:Name="CalculateRootButton"
                            Style="{StaticResource ButtonStyle}"
                            Content="Найти корень"
                            Click="CalculateRootButton_Click"
                            Margin="0,0,10,0"
                            Width="160" />

						<Button
                            x:Name="CalculateExtremumButton"
                            Style="{StaticResource ButtonStyle}"
                            Content="Найти экстремум"
                            Click="CalculateExtremumButton_Click"
                            Width="160" />
					</StackPanel>

					<Button
                        x:Name="ClearButton"
                        Style="{StaticResource SecondaryButtonStyle}"
                        Content="Очистить"
                        Click="ClearButton_Click"
                        Margin="0,15,0,0" />
				</StackPanel>
			</Border>

			<!-- Правая панель - Результаты и график -->
			<Grid Grid.Column="2">
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto" />
					<RowDefinition Height="20" />
					<RowDefinition Height="*" />
				</Grid.RowDefinitions>

				<!-- Верхняя часть - Результаты -->
				<Border
                    Grid.Row="0"
                    Background="White"
                    CornerRadius="8"
                    BorderBrush="#E0E0E0"
                    BorderThickness="1"
                    Padding="20">

					<Border.Effect>
						<DropShadowEffect BlurRadius="10" Opacity="0.1" ShadowDepth="2" />
					</Border.Effect>

					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="*" />
							<ColumnDefinition Width="20" />
							<ColumnDefinition Width="*" />
						</Grid.ColumnDefinitions>

						<!-- Левый блок - Основной результат -->
						<StackPanel Grid.Column="0">
							<TextBlock Style="{StaticResource LabelStyle}" Text="Найденный результат:" />
							<TextBox
                                x:Name="ResultTextBox"
                                Style="{StaticResource ResultsTextBoxStyle}"
                                Height="100"
                                Margin="0,0,0,10" />
						</StackPanel>

						<!-- Правый блок - Подробная информация -->
						<StackPanel Grid.Column="2">
							<TextBlock Style="{StaticResource LabelStyle}" Text="Подробная информация:" />
							<TextBox
                                x:Name="DetailsTextBox"
                                Style="{StaticResource ResultsTextBoxStyle}"
                                Height="100" />
						</StackPanel>
					</Grid>
				</Border>

				<!-- Нижняя часть - График -->
				<Border
                    Grid.Row="2"
                    Background="White"
                    CornerRadius="8"
                    BorderBrush="#E0E0E0"
                    BorderThickness="1"
                    Padding="20">

					<Border.Effect>
						<DropShadowEffect BlurRadius="10" Opacity="0.1" ShadowDepth="2" />
					</Border.Effect>

					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto" />
							<RowDefinition Height="*" />
						</Grid.RowDefinitions>

						<TextBlock
                            Grid.Row="0"
                            Style="{StaticResource LabelStyle}"
                            Text="График функции"
                            Margin="0,0,0,10" />

						<!-- ЗДЕСЬ ИСПРАВЛЕНИЕ - Вложенный Border с ContentControl -->
						<Border
                            Grid.Row="1"
                            Margin="20,0,20,20"
                            Background="White">
							<Border.Effect>
								<DropShadowEffect BlurRadius="5" Opacity="0.05" ShadowDepth="1" />
							</Border.Effect>
							<ContentControl x:Name="ChartContainer" />
						</Border>
					</Grid>
				</Border>
			</Grid>
		</Grid>

		<!-- Кнопка экспорта -->
		<StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Left" Margin="764,6,0,0" Width="296">
			<Button
                x:Name="ExportButton"
                Style="{StaticResource SecondaryButtonStyle}"
                Content="Экспорт результатов"
                Click="ExportButton_Click"
                Margin="0,0,10,0" />

			<Button
                x:Name="TestDataButton"
                Style="{StaticResource SecondaryButtonStyle}"
                Content="Тестовые данные"
                Click="TestDataButton_Click" />
		</StackPanel>
	</Grid>
</Page>